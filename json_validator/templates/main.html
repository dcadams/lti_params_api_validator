<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Course Json Validator</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
</head>
<body>
    <label for="cjsonlabel">Course Json:</label>

    <!-- Temporary data for development purposes -->
    <textarea id="json_data" name="jsontxtarea" rows="50" cols="150">
    [
        {
            "block_key": "block-v1:test+new+course+type@lti_advantage_consumer+block@6394d702ab89433894828e1b23a45f78",
            "display_name": "Tutoriel de navigation dans le cours",
            "launch_url": "https://hub-dev.netacad.com/kernel/lti/launch?client_id=824811",
            "tool_id": "11",
            "custom_parameters": [
                "course=i2cs",
                "version=7.1",
                "lang=fr-FR",
                "module=m0",
                "app=sgp",
                "launch=adl"
            ],
            "scored": false,
            "send_email": true,
            "send_name": true,
            "send_username": true
        },
        {
            "block_key": "block-v1:test+new+course+type@lti_advantage_consumer+block@78299c70bcc649e388e4e64a8698ce0e",
            "display_name": "Introduction à la cybersécurité",
            "launch_url": "https://hub-dev.netacad.com/kernel/lti/launch?client_id=824811",
            "tool_id": "11",
            "custom_parameters": [
                "course=i2cs",
                "version=7.1",
                "lang=fr-FR",
                "module=m1",
                "app=sgp",
                "launch=adl"
            ],
            "scored": true,
            "send_email": true,
            "send_name": true,
            "send_username": true
        },
        {
            "block_key": "block-v1:test+new+course+type@lti_advantage_consumer+block@ac8e38bddc9d4fb48092e232cf2f3da9",
            "display_name": "Attaques, Concepts et Techniques",
            "launch_url": "https://hub-dev.netacad.com/kernel/lti/launch?client_id=824811",
            "tool_id": "11",
            "custom_parameters": [
                "course=i2cs",
                "version=7.1",
                "lang=fr-FR",
                "module=m2",
                "app=sgp",
                "launch=adl"
            ],
            "scored": true,
            "send_email": true,
            "send_name": true,
            "send_username": true
        },
        {
            "block_key": "block-v1:test+new+course+type@lti_advantage_consumer+block@712c7ea6ccdb42028032184ddafbb01e",
            "display_name": "Introduction à la cybersécurité : examen final du cours",
            "launch_url": "https://hub-dev.netacad.com/kernel/lti/launch?client_id=824811",
            "tool_id": "11",
            "custom_parameters": [
                "course=i2cs",
                "version=7.1",
                "lang=fr-FR",
                "module=m6",
                "app=sgp",
                "launch=adl"
            ],
            "scored": true,
            "send_email": true,
            "send_name": true,
            "send_username": true
        }
    ]
    </textarea>
    <button id="submit">Submit</button>
</body>
</html>
<script type="text/javascript">
    $(document).ready(function(){  
        $("#submit").click(function(){  
            var rawJson = document.getElementById('json_data').value;
            var jsonObj = JSON.parse(rawJson);
            var pretty = JSON.stringify(jsonObj, undefined, 4);
            document.getElementById('json_data').value = pretty;
            debugger;
            jQuery.ajax({  
                url: 'validate/',  
                type: 'POST',
                contentType: 'application/json;charset=UTF-8',
                headers: { "X-CSRFToken": '{{ csrf_token }}' },
                data: rawJson,
                success: function(data) {  
                    $("#para").html(data);
                }  
            });  
        });  
    });
</script>